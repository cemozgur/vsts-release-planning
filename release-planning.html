 <!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
    <title>Release Planning - 3</title>
    <script src="sdk/scripts/VSS.SDK.js"></script>

    <script type="text/javascript">
        VSS.init({
            explicitNotifyLoaded: true,
            usePlatformScripts: true
        });

        VSS.require(["VSS/Service", "TFS/WorkItemTracking/RestClient"], function (VSS_Service, TFS_Wit_WebApi) {
            // Get the REST client
            var projectId = VSS.getWebContext().project.id;
            var witClient = VSS_Service.getCollectionClient(TFS_Wit_WebApi.WorkItemTrackingHttpClient);

            var featureItemsQuery = "Select [System.Id], [System.Title], [System.State] From WorkItems Where [System.WorkItemType] = 'Feature'";
            
            witClient.queryByWiql( { query: featureItemsQuery}, projectId)
                .then(function (query) {
                //query.id, query.name 
                console.log(query);
                var idFeatures = [];//array of numbers, features id

                for (i in query.workItems) {
                    idFeatures.push(query.workItems[i].id);
                }

                console.log(idFeatures);

                witClient.getWorkItems(idFeatures)
                    .then(
                    function(featureItems) {
                        console.log(featureItems);

                        var $list = $('<ul>');

                        for (i in featureItems) {
                            $list.append($('<li>').text("Feature " + featureItems[i].fields["System.Id"] + ": " + featureItems[i].fields["System.Title"]));
                        }

                        // Append the list to the feature-info-container
                        var $container = $('#feature-info-container');
                        $container.empty();
                        $container.append($list);

                        VSS.notifyLoadSucceeded();
                    }
                );

            }, function (error) {
                console.log("Feature information is not available.");
                VSS.notifyLoadSucceeded();
            });


        });       
    
    </script>


 </head>
 <body>
    <h1>These features are goind to be considered for the release planning approach.</h1> 

    <div id="feature-info-container"></div>


 </body>
 </html>